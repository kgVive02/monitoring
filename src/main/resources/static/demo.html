<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KG ëª¨ë¹Œë¦¬ì–¸ìŠ¤ - NBP/DR ëª¨ë‹ˆí„°ë§</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background: #ffffff;
            color: #333;
            line-height: 1.6;
        }

        /* íˆì–´ë¡œ ì„¹ì…˜ */
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0 120px;
            position: relative;
            overflow: hidden;
        }

        .hero-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .hero-content {
            flex: 1;
            max-width: 500px;
        }

        .hero-title {
            font-size: 48px;
            font-weight: 300;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .hero-subtitle {
            font-size: 18px;
            opacity: 0.9;
            margin-bottom: 40px;
            font-weight: 300;
        }

        .hero-stats {
            display: flex;
            gap: 40px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 5px;
        }

        .hero-visual {
            flex: 1;
            text-align: center;
            position: relative;
        }

        .monitor-icon {
            width: 300px;
            height: 200px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            max-width: 1200px;
            margin: -60px auto 0;
            padding: 0 20px;
            position: relative;
            z-index: 10;
        }

        /* íƒ­ ë©”ë‰´ */
        .tab-menu {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 40px;
            overflow: hidden;
        }

        .tab-header {
            display: flex;
            border-bottom: 1px solid #f0f0f0;
        }

        .tab-item {
            flex: 1;
            padding: 20px;
            text-align: center;
            background: #f8f9fa;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 16px;
            font-weight: 500;
        }

        .tab-item.active {
            background: white;
            color: #333;
            border-bottom: 3px solid #667eea;
        }

        .tab-content {
            padding: 40px;
        }

        /* ì°¨íŠ¸ ì„¹ì…˜ */
        .chart-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 40px;
            overflow: hidden;
        }

        .section-header {
            padding: 30px 40px 20px;
            border-bottom: 1px solid #f0f0f0;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .section-subtitle {
            color: #666;
            font-size: 14px;
        }

        .chart-container {
            position: relative;
            height: 400px;
            padding: 40px;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 40px;
            padding: 20px 40px 30px;
            background: #f8f9fa;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            font-weight: 500;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        /* ì„œë¹„ìŠ¤ ì¹´ë“œ */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .service-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }

        .card-header {
            padding: 25px 30px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #f0f0f0;
        }

        .service-name {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .service-info {
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }

        .card-body {
            padding: 30px;
        }

        .ratio-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .ratio-card {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .ratio-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .ratio-label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nbp-color {
            color: #667eea;
        }

        .dr-color {
            color: #f093fb;
        }

        .server-details {
            font-size: 14px;
        }

        .server-group {
            margin-bottom: 20px;
        }

        .server-group-title {
            font-weight: 600;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #f0f0f0;
        }

        .server-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            color: #666;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-normal {
            background: #28a745;
        }

        .status-warning {
            background: #ffc107;
        }

        .status-error {
            background: #dc3545;
        }

        /* í‘¸í„° */
        .footer {
            background: #f8f9fa;
            padding: 40px 0;
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-top: 80px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .update-info {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 14px;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .hero-container {
                flex-direction: column;
                text-align: center;
            }

            .hero-title {
                font-size: 36px;
            }

            .hero-stats {
                justify-content: center;
            }

            .tab-header {
                flex-direction: column;
            }

            .services-grid {
                grid-template-columns: 1fr;
            }

            .ratio-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- íˆì–´ë¡œ ì„¹ì…˜ -->
    <section class="hero-section">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§<br>NBP/DR íŠ¸ë˜í”½ ê´€ë¦¬</h1>
                <p class="hero-subtitle">KG MOBILIANS MONITORING SERVICES</p>
                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="heroTotalServices">5</span>
                        <span class="stat-label">ì„œë¹„ìŠ¤</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="heroTotalServers">12</span>
                        <span class="stat-label">ì„œë²„</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="heroActiveServices">3</span>
                        <span class="stat-label">ì „í™˜ì¤‘</span>
                    </div>
                </div>
            </div>
            <div class="hero-visual">
                <div class="monitor-icon">ğŸ“Š</div>
            </div>
        </div>
    </section>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="main-content">
        <!-- íƒ­ ë©”ë‰´ -->
        <div class="tab-menu">
            <div class="tab-header">
                <button class="tab-item active">ì‹¤ì‹œê°„í˜„í™©</button>
            </div>
            <div class="tab-content">
                <!-- ì°¨íŠ¸ ì„¹ì…˜ -->
                <div class="chart-section">
                    <div class="section-header">
                        <h2 class="section-title">ì‹¤ì‹œê°„ NBP/DR íŠ¸ë˜í”½ ë¹„ìœ¨</h2>
                        <p class="section-subtitle">ì„œë¹„ìŠ¤ë³„ NBP/DR íŠ¸ë˜í”½ ë¹„ìœ¨ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="trafficChart"></canvas>
                    </div>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: linear-gradient(45deg, #667eea, #764ba2);"></div>
                            <span>NBP ì„œë²„ (ìš´ì˜)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: linear-gradient(45deg, #f093fb, #f5576c);"></div>
                            <span>DR ì„œë²„ (ì¬í•´ë³µêµ¬)</span>
                        </div>
                    </div>
                </div>

                <!-- ì„œë¹„ìŠ¤ ìƒì„¸ -->
                <div class="services-grid" id="servicesGrid">
                    <!-- ì„œë¹„ìŠ¤ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </main>

    <!-- ì—…ë°ì´íŠ¸ ì •ë³´ -->
    <div class="update-info">
        <span class="status-indicator status-normal"></span>
        ì‹œìŠ¤í…œ ì •ìƒ ìš´ì˜ ì¤‘ | ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span id="lastUpdate"></span> | ìë™ ê°±ì‹ : 5ì´ˆë§ˆë‹¤
    </div>

    <!-- í‘¸í„° -->
    <footer class="footer">
        <div class="footer-content">
            <p>Â© 2024 KG MOBILIANS. All rights reserved. | ê¸°ìˆ ì§€ì›: ITìš´ì˜íŒ€ | ëª¨ë‹ˆí„°ë§ì‹œìŠ¤í…œ v2.1</p>
        </div>
    </footer>

    <script>
        // ìƒ˜í”Œ ë°ì´í„°
        let servicesData = [
            {
                name: 'ì›¹ ì„œë¹„ìŠ¤',
                type: 'L4',
                vip: '10.10.1.100:80',
                status: 'normal',
                servers: {
                    nbp: [
                        { name: 'NBP-01', ratio: 35, sessions: 435 },
                        { name: 'NBP-02', ratio: 35, sessions: 435 },
                        { name: 'NBP-03', ratio: 30, sessions: 375 }
                    ],
                    dr: [
                        { name: 'DR-01', ratio: 0, sessions: 0 },
                        { name: 'DR-02', ratio: 0, sessions: 0 },
                        { name: 'DR-03', ratio: 0, sessions: 0 }
                    ]
                },
                totalSessions: 1245
            },
            {
                name: 'API ì„œë¹„ìŠ¤',
                type: 'GLB',
                vip: '10.10.2.100:8080',
                status: 'normal',
                servers: {
                    nbp: [
                        { name: 'NBP-01', ratio: 50, sessions: 428 },
                        { name: 'NBP-02', ratio: 50, sessions: 428 }
                    ],
                    dr: [
                        { name: 'DR-01', ratio: 0, sessions: 0 },
                        { name: 'DR-02', ratio: 0, sessions: 0 }
                    ]
                },
                totalSessions: 856
            },
            {
                name: 'DB ì„œë¹„ìŠ¤',
                type: 'L4',
                vip: '10.10.3.100:3306',
                status: 'warning',
                servers: {
                    nbp: [
                        { name: 'NBP-01', ratio: 35, sessions: 151 },
                        { name: 'NBP-02', ratio: 25, sessions: 108 }
                    ],
                    dr: [
                        { name: 'DR-01', ratio: 25, sessions: 108 },
                        { name: 'DR-02', ratio: 15, sessions: 65 }
                    ]
                },
                totalSessions: 432
            },
            {
                name: 'Cache ì„œë¹„ìŠ¤',
                type: 'L4',
                vip: '10.10.4.100:6379',
                status: 'error',
                servers: {
                    nbp: [
                        { name: 'NBP-01', ratio: 0, sessions: 0 }
                    ],
                    dr: [
                        { name: 'DR-01', ratio: 100, sessions: 234 }
                    ]
                },
                totalSessions: 234
            },
            {
                name: 'File ì„œë¹„ìŠ¤',
                type: 'GLB',
                vip: '10.10.5.100:21',
                status: 'warning',
                servers: {
                    nbp: [
                        { name: 'NBP-01', ratio: 40, sessions: 49 },
                        { name: 'NBP-02', ratio: 40, sessions: 49 }
                    ],
                    dr: [
                        { name: 'DR-01', ratio: 10, sessions: 12 },
                        { name: 'DR-02', ratio: 10, sessions: 13 }
                    ]
                },
                totalSessions: 123
            }
        ];

        let trafficChart;

        // ì°¨íŠ¸ ì´ˆê¸°í™”
        function initChart() {
            const ctx = document.getElementById('trafficChart').getContext('2d');
            
            // NBP ì„œë²„ë³„ ìƒ‰ìƒ (ê·¸ë¼ë°ì´ì…˜ ë¸”ë£¨ ê³„ì—´)
            const nbpColors = ['#667eea', '#764ba2', '#5a67d8', '#4c51bf', '#553c9a', '#44337a'];
            // DR ì„œë²„ë³„ ìƒ‰ìƒ (ê·¸ë¼ë°ì´ì…˜ í•‘í¬ ê³„ì—´)
            const drColors = ['#f093fb', '#f5576c', '#ec4899', '#db2777', '#be185d', '#9d174d'];
            
            const datasets = [];
            
            // ê° ì„œë¹„ìŠ¤ë³„ë¡œ ì„œë²„ ë°ì´í„°ì…‹ ìƒì„±
            servicesData.forEach((service, serviceIndex) => {
                // NBP ì„œë²„ë“¤
                service.servers.nbp.forEach((server, serverIndex) => {
                    datasets.push({
                        label: `${service.name} - ${server.name}`,
                        data: servicesData.map((s, i) => {
                            if (i === serviceIndex) {
                                return server.ratio;
                            }
                            return 0;
                        }),
                        backgroundColor: nbpColors[serverIndex % nbpColors.length],
                        borderColor: nbpColors[serverIndex % nbpColors.length],
                        borderWidth: 0,
                        stack: `service-${serviceIndex}`
                    });
                });
                
                // DR ì„œë²„ë“¤
                service.servers.dr.forEach((server, serverIndex) => {
                    datasets.push({
                        label: `${service.name} - ${server.name}`,
                        data: servicesData.map((s, i) => {
                            if (i === serviceIndex) {
                                return server.ratio;
                            }
                            return 0;
                        }),
                        backgroundColor: drColors[serverIndex % drColors.length],
                        borderColor: drColors[serverIndex % drColors.length],
                        borderWidth: 0,
                        stack: `service-${serviceIndex}`
                    });
                });
            });
            
            trafficChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: servicesData.map(service => service.name),
                    datasets: datasets
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: 'white',
                            bodyColor: 'white',
                            borderColor: 'rgba(255,255,255,0.1)',
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    const value = context.parsed.x;
                                    if (value > 0) {
                                        return context.dataset.label + ': ' + value + '%';
                                    }
                                    return null;
                                },
                                filter: function(tooltipItem) {
                                    return tooltipItem.parsed.x > 0;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: '#f0f0f0'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                },
                                color: '#666'
                            }
                        },
                        y: {
                            stacked: true,
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: '#666'
                            }
                        }
                    },
                    animation: {
                        duration: 800,
                        easing: 'easeInOutQuart'
                    },
                    transitions: {
                        active: {
                            animation: {
                                duration: 400
                            }
                        }
                    }
                }
            });
        }

        // ì„œë¹„ìŠ¤ ì¹´ë“œ ë Œë”ë§
        function renderServiceCards() {
            const container = document.getElementById('servicesGrid');
            container.innerHTML = '';

            servicesData.forEach(service => {
                const totalNbpRatio = service.servers.nbp.reduce((sum, server) => sum + server.ratio, 0);
                const totalDrRatio = service.servers.dr.reduce((sum, server) => sum + server.ratio, 0);
                
                let statusClass = '';
                let statusText = '';
                if (service.status === 'normal') {
                    statusClass = 'status-normal';
                    statusText = 'ì •ìƒ';
                } else if (service.status === 'warning') {
                    statusClass = 'status-warning';
                    statusText = 'ì „í™˜ì¤‘';
                } else {
                    statusClass = 'status-error';
                    statusText = 'ì£¼ì˜';
                }
                
                let serverDetails = '';
                
                // NBP ì„œë²„ë“¤
                if (service.servers.nbp.some(server => server.ratio > 0)) {
                    serverDetails += '<div class="server-group">';
                    serverDetails += '<div class="server-group-title nbp-color">NBP ì„œë²„</div>';
                    service.servers.nbp.forEach(server => {
                        if (server.ratio > 0) {
                            serverDetails += `<div class="server-item">
                                <span>${server.name}</span>
                                <span>${server.ratio}% (${server.sessions.toLocaleString()})</span>
                            </div>`;
                        }
                    });
                    serverDetails += '</div>';
                }
                
                // DR ì„œë²„ë“¤
                if (service.servers.dr.some(server => server.ratio > 0)) {
                    serverDetails += '<div class="server-group">';
                    serverDetails += '<div class="server-group-title dr-color">DR ì„œë²„</div>';
                    service.servers.dr.forEach(server => {
                        if (server.ratio > 0) {
                            serverDetails += `<div class="server-item">
                                <span>${server.name}</span>
                                <span>${server.ratio}% (${server.sessions.toLocaleString()})</span>
                            </div>`;
                        }
                    });
                    serverDetails += '</div>';
                }
                
                const card = document.createElement('div');
                card.className = 'service-card';
                card.innerHTML = `
                    <div class="card-header">
                        <div class="service-name">
                            <span class="status-indicator ${statusClass}"></span>
                            ${service.name}
                        </div>
                        <div class="service-info">
                            íƒ€ì…: ${service.type} | VIP: ${service.vip}<br>
                            ì„œë²„: NBP ${service.servers.nbp.length}ëŒ€, DR ${service.servers.dr.length}ëŒ€ | ì´ ì„¸ì…˜: ${service.totalSessions.toLocaleString()} | ìƒíƒœ: ${statusText}
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="ratio-grid">
                            <div class="ratio-card">
                                <div class="ratio-value nbp-color">${totalNbpRatio}%</div>
                                <div class="ratio-label">NBP ì´í•©</div>
                            </div>
                            <div class="ratio-card">
                                <div class="ratio-value dr-color">${totalDrRatio}%</div>
                                <div class="ratio-label">DR ì´í•©</div>
                            </div>
                        </div>
                        <div class="server-details">
                            ${serverDetails}
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        // íˆì–´ë¡œ ì„¹ì…˜ í†µê³„ ì—…ë°ì´íŠ¸
        function updateHeroStats() {
            const totalServices = servicesData.length;
            const totalServers = servicesData.reduce((sum, service) => 
                sum + service.servers.nbp.length + service.servers.dr.length, 0);
            const activeServices = servicesData.filter(service => {
                const nbpTotal = service.servers.nbp.reduce((sum, server) => sum + server.ratio, 0);
                const drTotal = service.servers.dr.reduce((sum, server) => sum + server.ratio, 0);
                return nbpTotal > 0 && drTotal > 0;
            }).length;

            document.getElementById('heroTotalServices').textContent = totalServices;
            document.getElementById('heroTotalServers').textContent = totalServers;
            document.getElementById('heroActiveServices').textContent = activeServices;
        }

        // ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜ (ë” ë¶€ë“œëŸ¬ìš´ ë³€í™”)
        function simulateDataChange() {
            servicesData.forEach(service => {
                if (Math.random() < 0.2) { // 20%ë¡œ ë³€ê²½ ë¹ˆë„ ì¤„ì„
                    // NBP ì„œë²„ë“¤ ë¹„ìœ¨ ì¡°ì • (ë” ì‘ì€ ë³€í™”ëŸ‰)
                    service.servers.nbp.forEach(server => {
                        const change = Math.floor(Math.random() * 7) - 3; // -3 ~ +3ìœ¼ë¡œ ë³€í™”ëŸ‰ ì¤„ì„
                        server.ratio = Math.max(0, Math.min(100, server.ratio + change));
                        server.sessions = Math.max(0, server.sessions + Math.floor(Math.random() * 11) - 5);
                    });
                    
                    // DR ì„œë²„ë“¤ ë¹„ìœ¨ ì¡°ì • (ë” ì‘ì€ ë³€í™”ëŸ‰)
                    service.servers.dr.forEach(server => {
                        const change = Math.floor(Math.random() * 7) - 3; // -3 ~ +3ìœ¼ë¡œ ë³€í™”ëŸ‰ ì¤„ì„
                        server.ratio = Math.max(0, Math.min(100, server.ratio + change));
                        server.sessions = Math.max(0, server.sessions + Math.floor(Math.random() * 11) - 5);
                    });
                    
                    // ì „ì²´ ë¹„ìœ¨ì´ 100%ê°€ ë˜ë„ë¡ ì •ê·œí™”
                    const totalRatio = service.servers.nbp.reduce((sum, s) => sum + s.ratio, 0) + 
                                     service.servers.dr.reduce((sum, s) => sum + s.ratio, 0);
                    
                    if (totalRatio > 0 && totalRatio !== 100) {
                        const factor = 100 / totalRatio;
                        service.servers.nbp.forEach(server => {
                            server.ratio = Math.round(server.ratio * factor);
                        });
                        service.servers.dr.forEach(server => {
                            server.ratio = Math.round(server.ratio * factor);
                        });
                    }
                    
                    // ì´ ì„¸ì…˜ ìˆ˜ ì—…ë°ì´íŠ¸
                    service.totalSessions = service.servers.nbp.reduce((sum, s) => sum + s.sessions, 0) + 
                                          service.servers.dr.reduce((sum, s) => sum + s.sessions, 0);
                    
                    // ìƒíƒœ ì—…ë°ì´íŠ¸
                    const nbpTotal = service.servers.nbp.reduce((sum, s) => sum + s.ratio, 0);
                    const drTotal = service.servers.dr.reduce((sum, s) => sum + s.ratio, 0);
                    
                    if ((nbpTotal === 100 && drTotal === 0) || (nbpTotal === 0 && drTotal === 100)) {
                        service.status = 'normal';
                    } else if (nbpTotal > 0 && drTotal > 0) {
                        service.status = 'warning';
                    } else {
                        service.status = 'error';
                    }
                }
            });
        }

        // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        function updateChart() {
            // ê¸°ì¡´ ì°¨íŠ¸ë¥¼ íŒŒê´´í•˜ì§€ ì•Šê³  ë°ì´í„°ë§Œ ì—…ë°ì´íŠ¸
            const nbpColors = ['#667eea', '#764ba2', '#5a67d8', '#4c51bf', '#553c9a', '#44337a'];
            const drColors = ['#f093fb', '#f5576c', '#ec4899', '#db2777', '#be185d', '#9d174d'];
            
            // ê¸°ì¡´ ë°ì´í„°ì…‹ êµ¬ì¡° ìœ ì§€í•˜ë©´ì„œ ë°ì´í„°ë§Œ ì—…ë°ì´íŠ¸
            let datasetIndex = 0;
            
            servicesData.forEach((service, serviceIndex) => {
                // NBP ì„œë²„ë“¤ ë°ì´í„° ì—…ë°ì´íŠ¸
                service.servers.nbp.forEach((server, serverIndex) => {
                    if (trafficChart.data.datasets[datasetIndex]) {
                        // í•´ë‹¹ ì„œë¹„ìŠ¤ ìœ„ì¹˜ì˜ ë°ì´í„°ë§Œ ì—…ë°ì´íŠ¸
                        trafficChart.data.datasets[datasetIndex].data[serviceIndex] = server.ratio;
                    }
                    datasetIndex++;
                });
                
                // DR ì„œë²„ë“¤ ë°ì´í„° ì—…ë°ì´íŠ¸
                service.servers.dr.forEach((server, serverIndex) => {
                    if (trafficChart.data.datasets[datasetIndex]) {
                        // í•´ë‹¹ ì„œë¹„ìŠ¤ ìœ„ì¹˜ì˜ ë°ì´í„°ë§Œ ì—…ë°ì´íŠ¸
                        trafficChart.data.datasets[datasetIndex].data[serviceIndex] = server.ratio;
                    }
                    datasetIndex++;
                });
            });
            
            // ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ì—…ë°ì´íŠ¸
            trafficChart.update('active');
        }

        // ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„
        function updateLastUpdateTime() {
            const now = new Date();
            const timeString = now.toLocaleString('ko-KR');
            document.getElementById('lastUpdate').textContent = timeString;
        }

        // ì „ì²´ ì—…ë°ì´íŠ¸
        function updateDashboard() {
            simulateDataChange();
            updateChart();
            renderServiceCards();
            updateHeroStats();
            updateLastUpdateTime();
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initChart();
            renderServiceCards();
            updateHeroStats();
            updateLastUpdateTime();
            
            // 5ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸
            setInterval(updateDashboard, 5000);
        });
    </script>
</body>
</html>